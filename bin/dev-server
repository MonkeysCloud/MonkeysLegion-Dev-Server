#!/usr/bin/env php
<?php
declare(strict_types=1);

// Autoload project
$autoload = __DIR__ . '/../vendor/autoload.php';
if (! file_exists($autoload)) {
    fwrite(STDERR, "Error: vendor/autoload.php not found; run composer install first.\n");
    exit(1);
}
require $autoload;

// Invoke the DevServer
$server = new MonkeysLegion\DevServer\DevServer();

// Allow overriding via env vars or CLI args
$host = $argv[1] ?? ($_SERVER['ML_DEV_HOST']  ?? '127.0.0.1');
$port = isset($argv[2]) ? (int) $argv[2] : (int) ($_SERVER['ML_DEV_PORT'] ?? 8000);

$server->serve($host, $port);